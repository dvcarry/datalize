(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{165:function(e,t,n){},166:function(e,t,n){},268:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(27),c=n.n(r),s=(n(165),n(166),n(167),n(38)),l=(n(154),n(152)),i=n(52),o=n(150),u=n(94),d=n(270),j=n(15),f=[{title:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435",dataIndex:"name",key:"name"},{title:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",dataIndex:"amount",key:"age",width:100,align:"center",render:function(e){return Object(j.jsx)("span",{children:e.toLocaleString("ru")})}},{title:"\u0414\u043e\u043b\u044f",dataIndex:"percent",key:"percent",width:100,align:"center",render:function(e){return e>5?Object(j.jsxs)("span",{style:{color:"green",fontWeight:500},children:[e,"%"]}):Object(j.jsxs)("span",{children:[e,"%"]})}}],p=function(e){var t=e.data,n=e.filterHandler,r=Object(a.useState)([]),c=Object(s.a)(r,2),l=c[0],i=c[1],o=function(){n(l),i([])},p={selectedRowKeys:l,onChange:function(e){i(e)}};return Object(j.jsx)("div",{className:"div",children:t.map((function(e){var t=l.length>0&&e.column===l[0].split(":")[0];return Object(j.jsx)(u.Element,{name:e.column,className:"element",children:Object(j.jsxs)("div",{className:"table",children:[Object(j.jsxs)("div",{className:"table_header",children:[Object(j.jsx)("h3",{children:e.column}),Object(j.jsx)("span",{className:t?"button button-red":"hidden",onClick:o,children:"\u041e\u0442\u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c"})]}),Object(j.jsx)(d.a,{dataSource:e.data,columns:f,rowSelection:p,pagination:{position:["none"]}})]})},e.column)}))})},b=n(34),m=n.n(b),v=n(123),O=n(108),h=n(57),x=n(155),g=n(82),S=n.n(g);S.a.defaults.baseURL="http://82.146.40.11:5000";var k=function(e,t){return Object(h.a)(m.a.mark((function n(){var a,r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S.a.post("/api/files/filter",{filename:e,filter:t});case 3:return a=n.sent,r=a.data,n.abrupt("return",r);case 8:n.prev=8,n.t0=n.catch(0),console.log("error",n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},N=function(e,t){return Object(h.a)(m.a.mark((function n(){var a,r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S.a.post("/api/files/export",{filename:e,filter:t});case 3:return a=n.sent,r=a.data,n.abrupt("return",r);case 8:n.prev=8,n.t0=n.catch(0),console.log("error",n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},y=function(e){return Object(h.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.post("/api/files/filename",{filename:e});case 3:return n=t.sent,a=n.data,t.abrupt("return",a);case 8:return t.prev=8,t.t0=t.catch(0),console.log("error",t.t0),t.abrupt("return",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()};var w="datalize",F=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1];return{files:n,setToLocalStorage:function(e){var t=JSON.parse(localStorage.getItem(w));t?t.files.find((function(t){return e===t}))||localStorage.setItem(w,JSON.stringify({files:[].concat(Object(O.a)(t.files),[e])})):localStorage.setItem(w,JSON.stringify({files:[e]}))},getFilesFromLocalStorage:function(){var e=JSON.parse(localStorage.getItem(w));e&&e.files&&r(e.files)}}},L=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=(t[0],t[1],Object(a.useState)("")),r=Object(s.a)(n,2),c=r[0],d=r[1],f=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),l=Object(s.a)(c,2),i=l[0],o=l[1],u=Object(a.useState)(null),d=Object(s.a)(u,2),j=d[0],f=d[1],p=Object(a.useState)(!1),b=Object(s.a)(p,2),g=b[0],S=b[1],w=Object(a.useState)(""),L=Object(s.a)(w,2),C=L[0],D=L[1],I=F(),T=(I.files,I.setToLocalStorage),H=(I.getFilesFromLocalStorage,function(){var e=Object(h.a)(m.a.mark((function e(t){var n,a,c,s,l,u=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:"plus",!g){e.next=3;break}return e.abrupt("return");case 3:return a=[],"plus"===n?(c={column:t[0].split(":")[0],value:t.map((function(e){return e.split(":")[1]}))},a=[].concat(Object(O.a)(i),[c])):"minus"===n&&(1===i[t.index].value.length?a=i.filter((function(e){return e.column!==t.column})):(s=i.map((function(e){return e.column===t.column?Object(v.a)(Object(v.a)({},e),{},{value:e.value.filter((function(e){return e!==t.value}))}):e})),a=s)),o(a),S(!0),e.next=9,k(j,a);case 9:l=e.sent,r(l.data),S(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),J=function(){var e=Object(h.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(""),S(!0),e.next=4,y(t);case 4:n=e.sent,console.log("\ud83d\ude80 ~ file: useData.js ~ line 53 ~ getDataByFilename ~ result",n),n.data?(T(t),r(n.data),f(t),S(!1)):400===n.response.status&&(console.log(n.response.data.error),D(n.response.data.error),S(!1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(h.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,N(j,i);case 3:t=e.sent,a=i,n=function(e){var t=e.getFullYear(),n=(e.getMonth()+1).toString();1===n.length&&(n="0"+n);var a=e.getDate().toString();return 1===a.length&&(a="0"+a),a+"-"+n+"-"+t}(new Date)+"__"+a.map((function(e){return"".concat(e.column,"-").concat(e.value.join(","))})).join("__"),Object(x.a)({data:t.data,fileName:n,exportType:"csv"}),S(!1);case 8:case"end":return e.stop()}var a}),e)})));return function(){return e.apply(this,arguments)}}();return{data:n,setData:r,loading:g,filter:i,filterHandler:H,filename:j,setFilename:f,getDataByFilename:J,saveFileHandler:_,error:C}}(),b=f.data,g=f.filter,S=f.loading,w=(f.setData,f.filterHandler),L=(f.filename,f.error),C=(f.setFilename,f.getDataByFilename),D=f.saveFileHandler,I=F(),T=I.files,H=(I.setToLocalStorage,I.getFilesFromLocalStorage);return Object(a.useEffect)((function(){H()}),[]),b?Object(j.jsxs)("div",{className:"main",children:[Object(j.jsx)("div",{className:"info div",children:Object(j.jsxs)("div",{className:"stick",children:[b?Object(j.jsxs)("div",{className:"red",children:[b.length.toLocaleString("ru"),Object(j.jsx)(o.a,{spinning:S})]}):null,g.length>0?Object(j.jsxs)("div",{style:{marginTop:"20px"},children:[Object(j.jsx)("h4",{style:{marginTop:"20px"},children:"\u0414\u0415\u0419\u0421\u0422\u0412\u0418\u042f"}),Object(j.jsx)("div",{className:"button",onClick:D,children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u044e\u0437\u0435\u0440\u043e\u0432"}),Object(j.jsx)("div",{className:"button",onClick:function(){return w([],"reset")},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0432\u0441\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b"})]}):null,g.length>0?Object(j.jsxs)("div",{style:{marginTop:"20px"},children:[Object(j.jsx)("h4",{style:{marginTop:"20px"},children:"\u0424\u0418\u041b\u042c\u0422\u0420\u042b"}),g.map((function(e,t){return e.value.map((function(n){return Object(j.jsxs)("div",{className:"button",onClick:function(){return w({value:n,column:e.column,index:t},"minus")},children:[e.column,": ",n]},"".concat(e.column,"-").concat(n))}))}))]}):null,Object(j.jsxs)("div",{className:"block",children:[Object(j.jsx)("h4",{children:"\u041f\u041e\u041a\u0410\u0417\u0410\u0422\u0415\u041b\u0418"}),Object(j.jsx)("ul",{className:"items",children:null===b||void 0===b?void 0:b.keys.work.map((function(e){return Object(j.jsx)("li",{children:Object(j.jsx)(u.Link,{activeClass:"active",className:e,to:e,spy:!0,smooth:!0,duration:500,children:e})},e)}))})]})]})}),b?Object(j.jsx)(p,{data:b.result,filterHandler:w}):null]}):Object(j.jsx)("div",{className:"center",children:Object(j.jsxs)("div",{className:"file_input",children:[Object(j.jsx)(l.a,{placeholder:"\u041f\u0430\u0440\u043e\u043b\u0438 \u044f\u0432\u043a\u0438",onChange:function(e){return d(e.target.value)}}),Object(j.jsx)("div",{className:"buttonblock",children:Object(j.jsx)(i.a,{type:"primary",block:!0,disabled:S,onClick:function(){return C(c)},children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"})}),L?Object(j.jsx)("div",{children:L}):null,T.length>0?Object(j.jsx)("div",{children:T.map((function(e){return Object(j.jsx)("div",{className:"button",onClick:function(){return C(e)},children:e})}))}):null,Object(j.jsx)(o.a,{spinning:S,size:"large"})]})})};var C=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(L,{})})};c.a.render(Object(j.jsx)(C,{}),document.getElementById("root"))}},[[268,1,2]]]);
//# sourceMappingURL=main.18454ae4.chunk.js.map