(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{165:function(e,t,n){},166:function(e,t,n){},268:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(27),c=n.n(r),s=(n(165),n(166),n(167),n(47)),i=(n(153),n(151)),l=n(52),u=n(149),o=n(94),d=n(270),j=n(15),p=[{title:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435",dataIndex:"name",key:"name"},{title:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",dataIndex:"amount",key:"age",width:100,align:"center",render:function(e){return Object(j.jsx)("span",{children:e.toLocaleString("ru")})}},{title:"\u0414\u043e\u043b\u044f",dataIndex:"percent",key:"percent",width:100,align:"center",render:function(e){return e>5?Object(j.jsxs)("span",{style:{color:"green",fontWeight:500},children:[e,"%"]}):Object(j.jsxs)("span",{children:[e,"%"]})}}],b=function(e){var t=e.data,n=e.filterHandler,r=Object(a.useState)([]),c=Object(s.a)(r,2),i=c[0],l=c[1],u=function(){n(i),l([])},b={selectedRowKeys:i,onChange:function(e){l(e)}};return Object(j.jsx)("div",{className:"div",children:t.map((function(e){var t=i.length>0&&e.column===i[0].split(":")[0];return Object(j.jsx)(o.Element,{name:e.column,className:"element",children:Object(j.jsxs)("div",{className:"table",children:[Object(j.jsxs)("div",{className:"table_header",children:[Object(j.jsx)("h3",{children:e.column}),Object(j.jsx)("span",{className:t?"button button-red":"hidden",onClick:u,children:"\u041e\u0442\u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c"})]}),Object(j.jsx)(d.a,{dataSource:e.data,columns:p,rowSelection:b,pagination:{position:["none"]}})]})},e.column)}))})},f=n(34),m=n.n(f),h=n(122),v=n(155),x=n(57),O=n(154),g=n(82),k=n.n(g);k.a.defaults.baseURL="http://82.146.40.11:5000";var w=function(e,t){return Object(x.a)(m.a.mark((function n(){var a,r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,k.a.post("/api/files/filter",{filename:e,filter:t});case 3:return a=n.sent,r=a.data,n.abrupt("return",r);case 8:n.prev=8,n.t0=n.catch(0),console.log("error",n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},y=function(e,t){return Object(x.a)(m.a.mark((function n(){var a,r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,k.a.post("/api/files/export",{filename:e,filter:t});case 3:return a=n.sent,r=a.data,n.abrupt("return",r);case 8:n.prev=8,n.t0=n.catch(0),console.log("error",n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},N=function(e){return Object(x.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.post("/api/files/filename",{filename:e});case 3:return n=t.sent,a=n.data,t.abrupt("return",a);case 8:t.prev=8,t.t0=t.catch(0),console.log("error",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()};var S=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=(t[0],t[1],Object(a.useState)("")),r=Object(s.a)(n,2),c=r[0],d=r[1],p=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),i=Object(s.a)(c,2),l=i[0],u=i[1],o=Object(a.useState)(null),d=Object(s.a)(o,2),j=d[0],p=d[1],b=Object(a.useState)(!1),f=Object(s.a)(b,2),g=f[0],k=f[1],S=function(){var e=Object(x.a)(m.a.mark((function e(t){var n,a,c,s,i,o=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:"plus",!g){e.next=3;break}return e.abrupt("return");case 3:return a=[],"plus"===n?(c={column:t[0].split(":")[0],value:t.map((function(e){return e.split(":")[1]}))},a=[].concat(Object(v.a)(l),[c])):"minus"===n&&(1===l[t.index].value.length?a=l.filter((function(e){return e.column!==t.column})):(s=l.map((function(e){return e.column===t.column?Object(h.a)(Object(h.a)({},e),{},{value:e.value.filter((function(e){return e!==t.value}))}):e})),a=s)),u(a),k(!0),e.next=9,w(j,a);case 9:i=e.sent,r(i.data),k(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(x.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.next=3,N(t);case 3:n=e.sent,r(n.data),p(t),k(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(x.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.next=3,y(j,l);case 3:t=e.sent,a=l,n=function(e){var t=e.getFullYear(),n=(e.getMonth()+1).toString();1===n.length&&(n="0"+n);var a=e.getDate().toString();return 1===a.length&&(a="0"+a),a+"-"+n+"-"+t}(new Date)+"__"+a.map((function(e){return"".concat(e.column,"-").concat(e.value.join(","))})).join("__"),Object(O.a)({data:t.data,fileName:n,exportType:"csv"}),k(!1);case 8:case"end":return e.stop()}var a}),e)})));return function(){return e.apply(this,arguments)}}();return{data:n,setData:r,loading:g,filter:l,filterHandler:S,filename:j,setFilename:p,getDataByFilename:C,saveFileHandler:F}}(),f=p.data,g=p.filter,k=p.loading,S=(p.setData,p.filterHandler),C=(p.filename,p.setFilename,p.getDataByFilename),F=p.saveFileHandler;return f?Object(j.jsxs)("div",{className:"main",children:[Object(j.jsx)("div",{className:"info div",children:Object(j.jsxs)("div",{className:"stick",children:[f?Object(j.jsxs)("div",{className:"red",children:[f.length.toLocaleString("ru"),Object(j.jsx)(u.a,{spinning:k})]}):null,g.length>0?Object(j.jsxs)("div",{style:{marginTop:"20px"},children:[Object(j.jsx)("h4",{style:{marginTop:"20px"},children:"\u0414\u0415\u0419\u0421\u0422\u0412\u0418\u042f"}),Object(j.jsx)("div",{className:"button",onClick:F,children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u044e\u0437\u0435\u0440\u043e\u0432"}),Object(j.jsx)("div",{className:"button",onClick:function(){return S([],"reset")},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0432\u0441\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b"})]}):null,g.length>0?Object(j.jsxs)("div",{style:{marginTop:"20px"},children:[Object(j.jsx)("h4",{style:{marginTop:"20px"},children:"\u0424\u0418\u041b\u042c\u0422\u0420\u042b"}),g.map((function(e,t){return e.value.map((function(n){return Object(j.jsxs)("div",{className:"button",onClick:function(){return S({value:n,column:e.column,index:t},"minus")},children:[e.column,": ",n]},"".concat(e.column,"-").concat(n))}))}))]}):null,Object(j.jsxs)("div",{className:"block",children:[Object(j.jsx)("h4",{children:"\u041f\u041e\u041a\u0410\u0417\u0410\u0422\u0415\u041b\u0418"}),Object(j.jsx)("ul",{className:"items",children:null===f||void 0===f?void 0:f.keys.work.map((function(e){return Object(j.jsx)("li",{children:Object(j.jsx)(o.Link,{activeClass:"active",className:e,to:e,spy:!0,smooth:!0,duration:500,children:e})},e)}))})]})]})}),f?Object(j.jsx)(b,{data:f.result,filterHandler:S}):null]}):Object(j.jsx)("div",{className:"center",children:Object(j.jsxs)("div",{className:"file_input",children:[Object(j.jsx)(i.a,{placeholder:"\u041f\u0430\u0440\u043e\u043b\u0438 \u044f\u0432\u043a\u0438",onChange:function(e){return d(e.target.value)}}),Object(j.jsx)("div",{className:"buttonblock",children:Object(j.jsx)(l.a,{type:"primary",block:!0,onClick:function(){return C(c)},children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"})}),Object(j.jsx)(u.a,{spinning:k,size:"large"})]})})};var C=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(S,{})})};c.a.render(Object(j.jsx)(C,{}),document.getElementById("root"))}},[[268,1,2]]]);
//# sourceMappingURL=main.ee72150b.chunk.js.map